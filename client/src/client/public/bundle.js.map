{"version":3,"sources":["webpack:///webpack/bootstrap e19fb3360b6a5505d324","webpack:///./src/client/app/index.js","webpack:///./src/client/app/golf.js","webpack:///./src/client/app/renderingFunctions.js","webpack:///./src/client/app/assetsLoader.js","webpack:///./src/client/app/assetsManager.js","webpack:///./src/client/app/texture.js","webpack:///./src/client/app/textureAtlas.js","webpack:///./src/client/app/stage.js","webpack:///./src/client/app/displayObjectContainer.js","webpack:///./src/client/app/displayObject.js","webpack:///./src/client/app/matrix2D.js","webpack:///./src/client/app/eventDispatcher.js","webpack:///./src/client/app/event.js","webpack:///./src/client/app/bitmap.js"],"names":["golf","socket","io","connect","assetsManager","assetsLoader","test","swip","init","container","document","getElementById","client","getInstance","onComplete","addFile","load","converter","stage","ctx","getContext","state","dragPosition","dragging","onClick","evt","hole","x","position","y","emit","onDragStart","distanceX","cluster","data","ball","distanceY","distance","Math","sqrt","pow","radius","onDragMove","onDragEnd","speedX","speedY","sensor","onChangeOrientation","rotationX","rotation","rotationY","onUpdate","save","applyTransform","transform","render","restore","translate","toDevicePixel","scale","getData","alias","addImage","atlas","getImageByAlias","createTexture","texture","getTextureByName","bmp","width","height","console","log","drawBackground","drawWalls","openingSort","drawBall","drawArrow","drawHole","throttle","fillStyle","fillRect","size","openings","transformX","transformY","lineWidth","shadowColor","shadowBlur","strokeStyle","beginPath","moveTo","left","sort","forEach","opening","lineTo","start","stroke","end","right","top","bottom","openingA","openingB","arc","PI","fill","angle","atan2","fn","threshhold","scope","last","deferTimer","context","now","Date","args","arguments","clearTimeout","setTimeout","apply","instance","AssetsLoader","_loadingList","_data","fileURL","fileAlias","push","url","length","obj","shift","image","Image","onload","_onLoadComplete","src","AssetsManager","_images","_atlases","_textures","Texture","name","rect","TextureAtlas","startX","startY","endX","endY","find","index","indexOf","splice","Stage","_lastTime","_frameCount","_fps","_canvas","_context","_debug","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","canvas","_enterFrame","curTime","getTime","clearRect","font","fillText","myRequestAnimationFrame","debug","DisplayObjectContainer","children","child","parent","removeChild","DisplayObject","scaleX","scaleY","pivotX","pivotY","skewX","skewY","alpha","matrix","_concatenedMatrix","filters","update","visible","mat","globalAlpha","a","b","c","d","tx","ty","buffer","_applyFilters","createElement","drawImage","draw","appendTransform","filter","Matrix2D","initialize","prototype","identity","DEG_TO_RAD","prepend","tx1","a1","c1","append","b1","d1","prependMatrix","appendMatrix","prependTransform","regX","regY","r","cos","sin","rotate","skew","invert","n","isIdentity","transformPoint","pt","decompose","target","reinitialize","copy","clone","toString","EventDispatcher","_listeners","type","useCapture","eventFound","getEventListener","event","currentTarget","bubbles","dispatchEvent","listener","i","arr","newListeners","listenerCurrent","ADDED","tab1","slice","tab2","concat","REMOVED","Triggers","ADDED_TO_STAGE","ENTER_FRAME","REMOVED_FROM_STAGE","Event","cancelable","Bitmap"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e19fb3360b6a5505d324","import golf from \"./golf\";\ngolf();\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/index.js","import {drawBackground, drawWalls, openingSort, drawBall, drawArrow, drawHole, throttle} from \"./renderingFunctions\"\nimport AssetsLoader from \"./assetsLoader\";\nimport AssetsManager from \"./assetsManager\";\nimport Texture from \"./texture\";\nimport TextureAtlas from \"./textureAtlas\";\nimport Stage from \"./stage\";\nimport Bitmap from \"./bitmap\";\n\n/* eslint-disable */\nfunction golf() {\n  'use strict';\n\n  var socket = io.connect();\n  let assetsManager = new AssetsManager();\n  let assetsLoader = new AssetsLoader();\n  let test = null;\n  //let stage = new Stage();\n\n  swip.init({ socket: socket, container: document.getElementById('root') }, function (client) {\n    assetsLoader.getInstance().onComplete = onComplete;\n    assetsLoader.getInstance().addFile(\"atari400.png\",\"ground\");\n    assetsLoader.getInstance().load();\n    var converter = client.converter;\n    var stage = client.stage;\n    var ctx = stage.getContext('2d');\n\n    var state = null;\n    var dragPosition = null;\n    var dragging = false;\n\n    client.onClick(function (evt) {\n      var hole = { x: evt.position.x, y: evt.position.y };\n      client.emit('setHole', hole);\n    });\n\n    client.onDragStart(function (evt) {\n      if (state) {\n        var distanceX = evt.position[0].x - state.cluster.data.ball.x;\n        var distanceY = evt.position[0].y - state.cluster.data.ball.y;\n        var distance = Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n\n        if (distance < (2 * state.cluster.data.ball.radius)) {\n          dragging = true;\n          dragPosition = evt.position[0];\n        }\n      }\n    });\n\n    client.onDragMove(function (evt) {\n      var distanceX = evt.position[0].x - state.cluster.data.ball.x;\n      var distanceY = evt.position[0].y - state.cluster.data.ball.y;\n      var distance = Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n\n      if (dragging) {\n        if (distance > 150) {\n          dragPosition = {\n            x: state.cluster.data.ball.x + (distanceX / distance) * 150,\n            y: state.cluster.data.ball.y + (distanceY / distance) * 150\n          }\n        } else {\n          dragPosition = evt.position[0];\n        }\n      }\n    });\n\n    client.onDragEnd(function (evt) {\n      if (dragging) {\n        dragging = false;\n        client.emit('hitBall', {\n          speedX: (evt.position[0].x - state.cluster.data.ball.x) / 2,\n          speedY: (evt.position[0].y - state.cluster.data.ball.y) / 2\n        });\n      }\n    });\n\n    swip.sensor.onChangeOrientation(throttle(function (evt) {\n      client.emit('updateOrientation', {\n        rotationX: evt.rotation.x,\n        rotationY: evt.rotation.y\n      });\n    }, 200));\n\n\n    client.onUpdate(function (evt) {\n      state = evt;\n      var client = state.client;\n      var ball = state.cluster.data.ball;\n      var hole = state.cluster.data.hole;\n\n      ctx.save();\n\n      applyTransform(ctx, converter, client.transform);\n      drawBackground(ctx, client);\n      drawHole(ctx, hole);\n\n      if (dragging) {\n        drawArrow(ctx, ball, dragPosition);\n      }\n\n      drawBall(ctx, ball);\n      drawWalls(ctx, client);\n      if(test) {\n        test.render(ctx)\n      }\n\n      ctx.restore();\n    });\n  });\n\n  function applyTransform (ctx, converter, transform) {\n    ctx.translate(-converter.toDevicePixel(transform.x), -converter.toDevicePixel(transform.y));\n    ctx.scale(converter.toDevicePixel(1), converter.toDevicePixel(1));\n\n  }\n\n  function onComplete() {\n    var data = assetsLoader.getInstance().getData();\n    // on initialise la racine en lui envoyant la référence vers le canvas\n    //stage.getInstance().init(canvas);\n\n    for( var alias in data ){\n        assetsManager.getInstance().addImage(data[alias],alias);\n    }\n\n    // on crée un nouvel atlas\n    var atlas = new TextureAtlas();\n\n    // on lui associe une image qui sera celle partagée par toutes les textures stockée en son sein\n    atlas.data = assetsManager.getInstance().getImageByAlias(\"ground\");\n\n    // on crée deux textures différentes, portant un nom différent, ayant chacune la même image\n    // mais pas les mêmes portions d'image associées\n    atlas.createTexture( \"texture_1\", 0,0,256,156);\n\n    var texture = atlas.getTextureByName(\"texture_1\"); // on retrouve notre texture\n    let bmp = new Bitmap(); // on créer un nouvel objet de type Bitmap\n    bmp.texture = texture; // on y associe la texture\n    bmp.width = 256/4; // on définie la largeur\n    bmp.height = 156/4;//... puis la hauteur\n    bmp.x = 200;\n    bmp.y = 200;\n    test = bmp;\n    //bmp.drawOnly(ctx)\n    //stage.getInstance().addChild(bmp); // on ajoute l'enfant à la racine\n  }\n\n};\n\nexport default golf;\n\nconsole.log(\"Example\")\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/golf.js","export function drawBackground (ctx, client) {\n    ctx.save();\n    ctx.fillStyle = '#80d735';\n    ctx.fillRect(client.transform.x, client.transform.y, client.size.width, client.size.height);\n    ctx.restore();\n  }\n\nexport function drawWalls (ctx, client) {\n    var openings = client.openings;\n    var transformX = client.transform.x;\n    var transformY = client.transform.y;\n    var width = client.size.width;\n    var height = client.size.height;\n\n    ctx.save();\n    ctx.lineWidth = 40;\n    ctx.shadowColor = '#dba863';\n    ctx.shadowBlur = 10;\n\n    ctx.strokeStyle = '#ffde99';\n\n    // left\n    ctx.beginPath();\n    ctx.moveTo(transformX, transformY);\n\n    openings.left.sort(openingSort).forEach(function (opening) {\n      ctx.lineTo(transformX, opening.start + transformY);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(transformX, opening.end + transformY);\n    });\n\n    ctx.lineTo(transformX, height + transformY);\n    ctx.stroke();\n\n    // right\n    ctx.beginPath();\n    ctx.moveTo(width + transformX, transformY);\n\n    openings.right.sort(openingSort).forEach(function (opening) {\n      ctx.lineTo(width + transformX, opening.start + transformY);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(width + transformX, opening.end + transformY);\n    });\n\n    ctx.lineTo(width + transformX, height + transformY);\n    ctx.stroke();\n\n    // top\n    ctx.beginPath();\n    ctx.moveTo(transformX, transformY);\n\n    openings.top.sort(openingSort).forEach(function (opening) {\n      ctx.lineTo(opening.start + transformX, transformY);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(opening.end + transformX, transformY);\n    });\n\n    ctx.lineTo(width + transformX, transformY);\n    ctx.stroke();\n\n    // bottom\n    ctx.beginPath();\n    ctx.moveTo(transformX, height + transformY);\n\n    openings.bottom.sort(openingSort).forEach(function (opening) {\n      ctx.lineTo(opening.start + transformX, height + transformY);\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.moveTo(opening.end + transformX, height + transformY);\n    });\n\n    ctx.lineTo(width + transformX, height + transformY);\n    ctx.stroke();\n    ctx.restore();\n  }\n\nexport function openingSort (openingA, openingB) {\n    return openingB.start - openingA.start;\n  }\n\nexport function drawBall (ctx, ball) {\n    ctx.save();\n\n    ctx.fillStyle = '#fff';\n    ctx.shadowBlur = 10;\n    ctx.shadowColor = 'rgba(0, 0, 0, 0.2)';\n\n    ctx.beginPath();\n    ctx.arc(ball.x, ball.y, ball.radius, 0, 2 * Math.PI);\n    ctx.fill();\n\n    ctx.restore();\n  }\n\nexport function drawArrow (ctx, ball, dragPosition) {\n    var angle;\n\n    ctx.save();\n\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\n    ctx.lineWidth = 3;\n    ctx.shadowBlur = 5;\n\n    angle = -Math.atan2(dragPosition.x - ball.x, dragPosition.y - ball.y) + Math.PI / 2;\n\n    ctx.beginPath();\n    ctx.arc(ball.x, ball.y, ball.radius * 2, angle + Math.PI / 2, angle - Math.PI / 2);\n    ctx.arc(dragPosition.x, dragPosition.y, ball.radius, angle - Math.PI / 2, angle + Math.PI / 2);\n    ctx.fill();\n\n    ctx.restore();\n  }\n\nexport function drawHole (ctx, hole) {\n    ctx.save();\n\n    ctx.fillStyle = 'black';\n    ctx.strokeStyle = '#4b7f1f';\n    ctx.lineWidth = 2;\n\n    ctx.beginPath();\n    ctx.arc(hole.x, hole.y, hole.radius, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\nexport function throttle(fn, threshhold, scope) {\n    threshhold || (threshhold = 250);\n    var last,\n      deferTimer;\n    return function () {\n      var context = scope || this;\n\n      var now = +new Date,\n        args = arguments;\n      if (last && now < last + threshhold) {\n        // hold on to it\n        clearTimeout(deferTimer);\n        deferTimer = setTimeout(function () {\n          last = now;\n          fn.apply(context, args);\n        }, threshhold);\n      } else {\n        last = now;\n        fn.apply(context, args);\n      }\n    };\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/renderingFunctions.js","//Tomahawk.registerClass( AssetsLoader, \"AssetsLoader\" );\nlet instance = null;\n\nclass AssetsLoader {\n\tconstructor() {\n    if(!instance) {\n      instance = this;\n    }\n    this._loadingList = [];\n    //callback functions\n    this.onComplete = null;\n    this._data = null;\n\n    return instance;\n\t}\n\n  getInstance() {\n    if(!instance ) {\n      instance = this;\n    }\n    return this;\n  }\n\n  getData() {\n    return this._data;\n  }\n\n\n  addFile(fileURL, fileAlias) {\n    this._data = {};\n    this._loadingList.push({ url:fileURL,alias:fileAlias });\n  }\n\n  load() {\n    if( this._loadingList.length == 0 ){\n      if( this.onComplete ){\n        this.onComplete();\n      }\n    }\n    else{\n      const obj = this._loadingList.shift();\n      let image = new Image();\n      image.onload = () => {\n        this._onLoadComplete(image, obj.alias);\n      };\n      image.src = obj.url;\n    }\n  }\n\n  _onLoadComplete(image,alias){\n    this._data[alias] = image;\n    this.load();\n  }\n};\nexport default AssetsLoader;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/assetsLoader.js","//Tomahawk.registerClass( AssetsManager, \"AssetsManager\" );\nlet instance = null;\n\nclass AssetsManager {\n\n  constructor() {\n    if(!instance) {\n      instance = this;\n    }\n    this._images = {};\n    this._atlases = {};\n    this._textures = {};\n\n    return instance;\n  }\n\n  getInstance() {\n    if(!instance ) {\n      instance = this;\n    }\n    return this;\n  }\n\n  addImage(image, alias) {\n    this._images[alias] = image;\n  }\n\n  getImages(){\n    return this._images;\n  }\n\n  getImageByAlias(alias){\n    if(this._images[alias]) {\n      return this._images[alias];\n    }\n    return null;\n  }\n\n  //atlases\n  addAtlas(atlas, alias) {\n    this._atlases[alias] = atlas;\n  }\n\n  getAtlases() {\n    return this._atlases;\n  }\n\n  getAtlasByAlias(alias){\n    if(this._atlases[alias]) {\n        return this._atlases[alias];\n    }\n    return null;\n  }\n\n  //textures\n  addTexture(texture, alias){\n      this._textures[alias] = texture;\n  }\n\n  getTextures(){\n      return this._textures;\n  }\n\n  getTextureByAlias(alias){\n    if(this._textures[alias]) {\n      return this._textures[alias];\n    }\n    return null;\n  }\n};\n\nexport default AssetsManager;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/assetsManager.js","//Tomahawk.registerClass( Texture, \"Texture\" );\nclass Texture {\n  constructor() {\n    this.data = null;\n    this.name = null;\n    this.rect = null;\n  }\n};\nexport default Texture;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/texture.js","//Tomahawk.registerClass( TextureAtlas, \"TextureAtlas\" );\nimport Texture from \"./texture\";\n\nclass TextureAtlas {\n  constructor() {\n    this._textures = [];\n    this.data = null;\n    this.name = null;\n  }\n\n  createTexture(name, startX, startY, endX, endY){\n    let texture = new Texture();\n    texture.name = name;\n    texture.data = this.data;\n    texture.rect = [startX, startY, endX, endY];\n    this._textures.push(texture);\n  }\n\n  getTextureByName(name){\n    return this._textures.find(texture => texture.name === name);\n    // while(--i > -1){\n    //   currentTexture = this._textures[i];\n    //   if(currentTexture.name == name){\n    //     return currentTexture;\n    //   }\n    // }\n  }\n\n  removeTexture(name){\n    let texture = this.getTextureByName(name);\n    if(texture === null) {\n      return;\n    }\n    let index = this._textures.indexOf(texture);\n    this._textures.splice(index,1);\n  }\n};\nexport default TextureAtlas;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/textureAtlas.js","// Tomahawk.registerClass( Stage, \"Stage\" );\n// Tomahawk.extend( \"Stage\", \"DisplayObjectContainer\" );\nimport DisplayObjectContainer from \"./displayObjectContainer\";\n\nlet instance = null;\n\nclass Stage extends DisplayObjectContainer {\n  constructor() {\n    super();\n    if(!instance) {\n      instance = this;\n    }\n    this._lastTime = 0;\n    this._frameCount = 0;\n    this._fps = 0;\n    this._canvas = null;\n    this._context = null;\n    this._debug = false;\n  }\n\n  myRequestAnimationFrame(){\n      return  window.requestAnimationFrame       ||  //Chromium\n              window.webkitRequestAnimationFrame ||  //Webkit\n              window.mozRequestAnimationFrame    || //Mozilla\n              window.oRequestAnimationFrame      || //Opera\n              window.msRequestAnimationFrame     || //IE\n              function(callback, element){ //Fallback function\n                  window.setTimeout(callback, 10);\n              }\n  }\n\n  getInstance() {\n    if(!instance ) {\n      instance = this;\n    }\n    return this;\n  }\n\n  init(canvas) {\n    this._canvas = canvas;\n    this._context = canvas.getContext(\"2d\");\n    this._enterFrame();\n  }\n\n  _enterFrame() {\n      const curTime = new Date().getTime();\n      this._frameCount++;\n      if(curTime - this._lastTime >= 1000){\n          this._fps = this._frameCount;\n          this._frameCount = 0;\n          this._lastTime = curTime;\n      }\n      this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n      this._context.save();\n      this.render(this._context);\n      this._context.restore();\n      if(this._debug === true){\n          this._context.save();\n          this._context.beginPath();\n          this._context.fillStyle = \"black\";\n          this._context.fillRect(0,0,100,30);\n          this._context.fill();\n          this._context.fillStyle = \"#016701\";\n          this._context.font = \"18pt sans-serif\";\n          this._context.fillText(\"fps: \"+this._fps, 0,30);\n          this._context.restore();\n      }\n      this.myRequestAnimationFrame()( () => { this._enterFrame(); });\n  }\n\n  getCanvas() {\n      return this._canvas;\n  }\n\n  getContext() {\n      return this._context;\n  }\n\n  getFPS() {\n    return this._fps;\n  }\n\n  setDebug(debug) {\n    this._debug = debug;\n  }\n};\nexport default Stage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/stage.js","// Tomahawk.registerClass( DisplayObjectContainer, \"DisplayObjectContainer\" );\n// Tomahawk.extend( \"DisplayObjectContainer\", \"DisplayObject\" );\nimport DisplayObject from \"./displayObject\";\n\nclass DisplayObjectContainer extends DisplayObject {\n\n  constructor() {\n      super();\n      this.children = [];\n  }\n\n  addChild(child) {\n    if(child.parent) {\n      child.parent.removeChild(child);\n    }\n    child.parent = this;\n    this.children.push(child);\n  }\n\n  draw(context) {\n    this.children.forEach(child => {\n      child.render(context);\n    });\n  }\n};\nexport default DisplayObjectContainer;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/displayObjectContainer.js","//Tomahawk.registerClass( DisplayObject, \"DisplayObject\" );\nimport Matrix2D from \"./matrix2D\";\nimport EventDispatcher from \"./eventDispatcher\";\n\nclass DisplayObject extends EventDispatcher {\n\n  constructor() {\n    super();\n    this.name = null;\n    this.parent = null;\n    this.x = 0;\n    this.y = 0;\n    this.scaleX = 1;\n    this.scaleY = 1;\n    this.rotation = 0;\n    this.pivotX = 0;\n    this.pivotY = 0;\n    this.skewX = 0;\n    this.skewY = 0;\n    this.width = 0;\n    this.height = 0;\n    this.alpha = 1;\n    this.matrix = null;\n    this._concatenedMatrix = new Matrix2D();\n    this.filters = [];\n  }\n\n  toRadians() {\n    return Math.PI / 180;\n  }\n\n  render(context) {\n   const matrix = this.update();\n\n    if(this.visible === false) {\n      return;\n    }\n    const mat = matrix;\n    context.save();\n    context.globalAlpha = this.alpha;\n    context.transform(mat.a, mat.b, mat.c, mat.d, mat.tx, mat.ty);\n    if(this.filters.length !== 0) {\n      const buffer = this._applyFilters();\n      const canvas = document.createElement(\"canvas\");\n      context.drawImage(canvas, 0, 0, buffer.width, buffer.height );\n    } else {\n      this.draw(context);\n    }this.draw(context);\n    context.restore();\n  }\n\n  draw(context) {\n    context.beginPath();\n    context.fillStyle = \"red\";\n    context.fillRect(this.x, this.y, this.width, this.height);\n    context.fill();\n  }\n\n  update() {\n   const mat = this.matrix || new Matrix2D();\n   mat.appendTransform(\n      this.x,\n      this.y,\n      this.scaleX,\n      this.scaleY,\n      this.rotation,\n      this.skewX,\n      this.skewY,\n      this.pivotX,\n      this.pivotY\n    );\n   return mat;\n  }\n\n  _applyFilters() {\n    const canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    canvas.width = this.width;\n    canvas.height = this.height;\n    this.draw(context);\n    this.filters.forEach(filter => {\n      console.log(filter)\n      filter.apply(canvas, context);\n    });\n    return canvas;\n  }\n\n  addFilter(filter) {\n    this.filters.push(filter);\n  }\n\n  // render(context) {\n  //   this.update();\n  //   if(this.visible === false) {\n  //     return;\n  //   }\n  //   const mat = this.matrix;\n  //   context.save();\n  //   context.globalAlpha = this.alpha;\n  //   context.transform(mat.a, mat.b, mat.c, mat.d, mat.tx, mat.ty);\n  //   if(this.filters != null) {\n  //     //  on appelle une nouvelle méthode _applyFilters\n  //     const buffer = this._applyFilters();\n  //     const canvas = document.createElement(\"canvas\");\n  //     context.drawImage(canvas, 0, 0, buffer.width, buffer.height );\n  //   } else {\n  //     this.draw(context);\n  //   }\n  //   context.restore();\n  // }\n\n  // isInRect(x,y, rectX, rectY, rectWidth, rectHeight) {\n  //   return\n  //      x > rectX + rectWidth ||\n  //      y > rectY + rectHeight ||\n  //      x < rectX ||\n  //      y < rectY;\n  // }\n\n  // getConcatenedMatrix(){\n  //   var current = this;\n  //   var mat = new Matrix2D();\n  //   while(current != null) {\n  //     current.update();\n  //     mat.prependMatrix(current.matrix );\n  //     current = current.parent;\n  //   }\n  //   this._concatenedMatrix = mat;\n  //   return this._concatenedMatrix;\n  // }\n\n\n  // localToGlobal(x, y) {\n  //   const matrix = this.getConcatenedMatrix();\n  //   const pt = matrix.transformPoint(x, y);\n  //   return new Point(pt.x, pt.y);\n  // }\n\n  // globalToLocal(x, y) {\n  //   const matrix = this.getConcatenedMatrix().clone().invert();\n  //   const pt = matrix.transformPoint(x, y);\n  //   return new Point(pt.x, pt.y);\n  // }\n\n  // hitTest(x, y) {\n  //   if(this.matrix === null) {\n  //     this.update();\n  //   }\n\n  //   const pt1 = this.globalToLocal(x,y);\n  //   return pt1.x < 0 || pt1.x > this.width || pt1.y < 0 || pt1.y > this.height;\n  // }\n  // TODO USE IT IN STAGE CLASS SO DONT FORGET TO ADD MISSING CODE DUDE :)\n\n\n};\nexport default DisplayObject;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/displayObject.js","function Matrix2D(a, b, c, d, tx, ty){\n    this.initialize(a, b, c, d, tx, ty);\n}\n\n// static public properties:\n\n/**\n * An identity matrix, representing a null transformation.\n * @property identity\n * @static\n * @type Matrix2D\n * @readonly\n **/\nMatrix2D.prototype.identity = null;// set at bottom of class definition.\n\n/**\n * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n * @property DEG_TO_RAD\n * @static\n * @final\n * @type Number\n * @readonly\n **/\nMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n// public properties:\n/**\n * Position (0, 0) in a 3x3 affine transformation matrix.\n * @property a\n * @type Number\n **/\nMatrix2D.prototype.a = 1;\n\n/**\n * Position (0, 1) in a 3x3 affine transformation matrix.\n * @property b\n * @type Number\n **/\nMatrix2D.prototype.b = 0;\n\n/**\n * Position (1, 0) in a 3x3 affine transformation matrix.\n * @property c\n * @type Number\n **/\nMatrix2D.prototype.c = 0;\n\n/**\n * Position (1, 1) in a 3x3 affine transformation matrix.\n * @property d\n * @type Number\n **/\nMatrix2D.prototype.d = 1;\n\n/**\n * Position (2, 0) in a 3x3 affine transformation matrix.\n * @property tx\n * @type Number\n **/\nMatrix2D.prototype.tx = 0;\n\n/**\n * Position (2, 1) in a 3x3 affine transformation matrix.\n * @property ty\n * @type Number\n **/\nMatrix2D.prototype.ty = 0;\n\n\n\n// constructor:\n/**\n * Initialization method. Can also be used to reinitialize the instance.\n * @method initialize\n * @param {Number} [a=1] Specifies the a property for the new matrix.\n * @param {Number} [b=0] Specifies the b property for the new matrix.\n * @param {Number} [c=0] Specifies the c property for the new matrix.\n * @param {Number} [d=1] Specifies the d property for the new matrix.\n * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n * @return {Matrix2D} This instance. Useful for chaining method calls.\n*/\nMatrix2D.prototype.initialize = function(a, b, c, d, tx, ty) {\n    this.a = (a == null) ? 1 : a;\n    this.b = b || 0;\n    this.c = c || 0;\n    this.d = (d == null) ? 1 : d;\n    this.tx = tx || 0;\n    this.ty = ty || 0;\n    return this;\n};\n\n// public methods:\n/**\n * Concatenates the specified matrix properties with this matrix. All parameters are required.\n * @method prepend\n * @param {Number} a\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.prepend = function(a, b, c, d, tx, ty) {\n    var tx1 = this.tx;\n    if (a != 1 || b != 0 || c != 0 || d != 1) {\n        var a1 = this.a;\n        var c1 = this.c;\n        this.a  = a1*a+this.b*c;\n        this.b  = a1*b+this.b*d;\n        this.c  = c1*a+this.d*c;\n        this.d  = c1*b+this.d*d;\n    }\n    this.tx = tx1*a+this.ty*c+tx;\n    this.ty = tx1*b+this.ty*d+ty;\n    return this;\n};\n\n/**\n * Appends the specified matrix properties with this matrix. All parameters are required.\n * @method append\n * @param {Number} a\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.append = function(a, b, c, d, tx, ty) {\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n\n    this.a  = a*a1+b*c1;\n    this.b  = a*b1+b*d1;\n    this.c  = c*a1+d*c1;\n    this.d  = c*b1+d*d1;\n    this.tx = tx*a1+ty*c1+this.tx;\n    this.ty = tx*b1+ty*d1+this.ty;\n    return this;\n};\n\n/**\n * Prepends the specified matrix with this matrix.\n * @method prependMatrix\n * @param {Matrix2D} matrix\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.prependMatrix = function(matrix) {\n    this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n    return this;\n};\n\n/**\n * Appends the specified matrix with this matrix.\n * @method appendMatrix\n * @param {Matrix2D} matrix\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.appendMatrix = function(matrix) {\n    this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n    return this;\n};\n\n/**\n * Generates matrix properties from the specified display object transform properties, and prepends them with this matrix.\n * For example, you can use this to generate a matrix from a display object: var mtx = new Matrix2D();\n * mtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n * @method prependTransform\n * @param {Number} x\n * @param {Number} y\n * @param {Number} scaleX\n * @param {Number} scaleY\n * @param {Number} rotation\n * @param {Number} skewX\n * @param {Number} skewY\n * @param {Number} regX Optional.\n * @param {Number} regY Optional.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation%360) {\n        var r = rotation*Matrix2D.DEG_TO_RAD;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n    } else {\n        cos = 1;\n        sin = 0;\n    }\n\n    if (regX || regY) {\n        // append the registration offset:\n        this.tx -= regX; this.ty -= regY;\n    }\n    if (skewX || skewY) {\n        // TODO: can this be combined into a single prepend operation?\n        skewX *= Matrix2D.DEG_TO_RAD;\n        skewY *= Matrix2D.DEG_TO_RAD;\n        this.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n        this.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n    } else {\n        this.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n    }\n    return this;\n};\n\n/**\n * Generates matrix properties from the specified display object transform properties, and appends them with this matrix.\n * For example, you can use this to generate a matrix from a display object: var mtx = new Matrix2D();\n * mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n * @method appendTransform\n * @param {Number} x\n * @param {Number} y\n * @param {Number} scaleX\n * @param {Number} scaleY\n * @param {Number} rotation\n * @param {Number} skewX\n * @param {Number} skewY\n * @param {Number} regX Optional.\n * @param {Number} regY Optional.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    \n    if (rotation%360) {\n        var r = rotation*Matrix2D.DEG_TO_RAD;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n    } else {\n        cos = 1;\n        sin = 0;\n    }\n\n    if (skewX || skewY) {\n        // TODO: can this be combined into a single append?\n        skewX *= Matrix2D.DEG_TO_RAD;\n        skewY *= Matrix2D.DEG_TO_RAD;\n        this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n        this.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n    } else {\n        this.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n    }\n\n    if (regX || regY) {\n        // prepend the registration offset:\n        this.tx -= regX*this.a+regY*this.c;\n        this.ty -= regX*this.b+regY*this.d;\n    }\n    return this;\n};\n\n/**\n * Applies a rotation transformation to the matrix.\n * @method rotate\n * @param {Number} angle The angle in radians. To use degrees, multiply by <code>Math.PI/180</code>.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.rotate = function(angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n\n    var a1 = this.a;\n    var c1 = this.c;\n    var tx1 = this.tx;\n\n    this.a = a1*cos-this.b*sin;\n    this.b = a1*sin+this.b*cos;\n    this.c = c1*cos-this.d*sin;\n    this.d = c1*sin+this.d*cos;\n    this.tx = tx1*cos-this.ty*sin;\n    this.ty = tx1*sin+this.ty*cos;\n    return this;\n};\n\n/**\n * Applies a skew transformation to the matrix.\n * @method skew\n * @param {Number} skewX The amount to skew horizontally in degrees.\n * @param {Number} skewY The amount to skew vertically in degrees.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n*/\nMatrix2D.prototype.skew = function(skewX, skewY) {\n    skewX = skewX*Matrix2D.DEG_TO_RAD;\n    skewY = skewY*Matrix2D.DEG_TO_RAD;\n    this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n    return this;\n};\n\n/**\n * Applies a scale transformation to the matrix.\n * @method scale\n * @param {Number} x The amount to scale horizontally\n * @param {Number} y The amount to scale vertically\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.scale = function(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n};\n\n/**\n * Translates the matrix on the x and y axes.\n * @method translate\n * @param {Number} x\n * @param {Number} y\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.translate = function(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n};\n\n/**\n * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n * @method identity\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.identity = function() {\n    this.a = this.d = 1;\n    this.b = this.c = this.tx = this.ty = 0;\n    return this;\n};\n\n/**\n * Inverts the matrix, causing it to perform the opposite transformation.\n * @method invert\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.invert = function() {\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    var tx1 = this.tx;\n    var n = a1*d1-b1*c1;\n\n    this.a = d1/n;\n    this.b = -b1/n;\n    this.c = -c1/n;\n    this.d = a1/n;\n    this.tx = (c1*this.ty-d1*tx1)/n;\n    this.ty = -(a1*this.ty-b1*tx1)/n;\n    return this;\n};\n\n/**\n * Returns true if the matrix is an identity matrix.\n * @method\nisIdentity\n * @return {Boolean}\n **/\nMatrix2D.prototype.isIdentity = function() {\n    return this.tx == 0 && this.ty == 0 && this.a == 1 && this.b == 0 && this.c == 0 && this.d == 1;\n};\n\n/**\n * Transforms a point according to this matrix.\n * @method transformPoint\n * @param {Number} x The x component of the point to transform.\n * @param {Number} y The y component of the point to transform.\n * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n * @return {Point} This matrix. Useful for chaining method calls.\n **/\nMatrix2D.prototype.transformPoint = function(x, y, pt) {\n    pt = pt||{};\n    pt.x = x*this.a+y*this.c+this.tx;\n    pt.y = x*this.b+y*this.d+this.ty;\n    return pt;\n};\n\n/**\n * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that this these values\n * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n * results.\n * @method decompose\n * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n*/\nMatrix2D.prototype.decompose = function(target) {\n    \n    if (target == null) { target = {}; }\n    target.x = this.tx;\n    target.y = this.ty;\n    target.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n    target.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n    var skewX = Math.atan2(-this.c, this.d);\n    var skewY = Math.atan2(this.b, this.a);\n\n    if (skewX == skewY) {\n        target.rotation = skewY/Matrix2D.DEG_TO_RAD;\n        if (this.a < 0 && this.d >= 0) {\n            target.rotation += (target.rotation <= 0) ? 180 : -180;\n        }\n        target.skewX = target.skewY = 0;\n    } else {\n        target.skewX = skewX/Matrix2D.DEG_TO_RAD;\n        target.skewY = skewY/Matrix2D.DEG_TO_RAD;\n    }\n    return target;\n};\n\n/**\n * Reinitializes all matrix properties to those specified.\n * @method reinitialize\n * @param {Number} [a=1] Specifies the a property for the new matrix.\n * @param {Number} [b=0] Specifies the b property for the new matrix.\n * @param {Number} [c=0] Specifies the c property for the new matrix.\n * @param {Number} [d=1] Specifies the d property for the new matrix.\n * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n*/\nMatrix2D.prototype.reinitialize = function(a, b, c, d, tx, ty) {\n    this.initialize(a,b,c,d,tx,ty);\n    return this;\n};\n\n/**\n * Copies all properties from the specified matrix to this matrix.\n * @method copy\n * @param {Matrix2D} matrix The matrix to copy properties from.\n * @return {Matrix2D} This matrix. Useful for chaining method calls.\n*/\nMatrix2D.prototype.copy = function(matrix) {\n    return this.reinitialize(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n};\n\n/**\n * Returns a clone of the Matrix2D instance.\n * @method clone\n * @return {Matrix2D} a clone of the Matrix2D instance.\n **/\nMatrix2D.prototype.clone = function() {\n    return (new Matrix2D()).copy(this);\n};\n\n/**\n * Returns a string representation of this object.\n * @method toString\n * @return {String} a string representation of the instance.\n **/\nMatrix2D.prototype.toString = function() {\n    return \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n};\nMatrix2D.identity = new Matrix2D();\n\nexport default Matrix2D;\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/matrix2D.js","//Tomahawk.registerClass( EventDispatcher, \"EventDispatcher\" );\nimport Event, { Triggers } from \"./event\";\n\nclass EventDispatcher {\n  constructor() {\n    this.parent = null;\n    this._listeners = [];\n  }\n\n  addEventListener(type, scope, callback, useCapture = true) {\n    this._listeners.push({ type, scope, callback, useCapture });\n    console.log(this._listeners)\n  }\n\n  hasEventListener(type){\n    if(this._listeners === null) {\n      return false;\n    }\n    const eventFound = this.getEventListener(type);\n    return !!eventFound;\n  }\n\n  dispatchEvent(event) {\n    if(event.target === null) {\n      event.target = this;\n    }\n    event.currentTarget = this;\n    const eventFound = this.getEventListener(event.type);\n    if(eventFound && (event.target === this || eventFound.useCapture !== false)) {\n      eventFound.callback.apply(eventFound.scope, [event]);\n    }\n    if(event.bubbles === true && this.parent !== null && !!this.parent.dispatchEvent) {\n      this.parent.dispatchEvent(event);\n    }\n  }\n\n  getEventListener(type) {\n    return this._listeners.find(listener => listener.type === type);\n  }\n\n  removeEventListener(type, scope, callback, useCapture) {\n    let listener = this.getEventListener(type);\n    while( listener != null ) {\n        var obj = {};\n        var i = this._listeners.length;\n        var arr = [];\n        const newListeners = this._listeners.filter(listenerCurrent => {\n          return  listenerCurrent.type !== listener.type || listenerCurrent.scope !== scope || listenerCurrent.callback !== callback || listenerCurrent.useCapture !== useCapture;\n        });\n        this._listeners = newListeners;\n        let listener = this.getEventListener(type);\n    }\n  }\n\n  addChild(child) {\n    if(child.parent) {\n      child.parent.removeChild(child);\n    }\n    child.parent = this;\n    this.children.push(child);\n    child.dispatchEvent(new Event(Triggers.ADDED, true, true));\n  }\n\n  addChildAt(child, index) {\n    const tab1 = this.children.slice(0, index);\n    const tab2 = this.children.slice(index);\n    this.children = tab1.concat([child]).concat(tab2);\n    child.parent = this;\n    child.dispatchEvent(new Event(Triggers.ADDED, true, true));\n  }\n\n  removeChildAt(index) {\n    const child = this.children[index];\n    if(child) {\n      child.parent = null;\n    }\n    this.children.splice(index,1);\n    child.dispatchEvent(new Event(Triggers.REMOVED, true, true));\n  }\n\n  removeChild(child) {\n    const index = this.children.indexOf(child);\n    if(index > -1) {\n      this.children.splice(index,1);\n    }\n    child.parent = null;\n    child.dispatchEvent(new Event(Triggers.REMOVED, true, true));\n  }\n};\nexport default EventDispatcher;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/eventDispatcher.js","//constants\nexport const Triggers = {\nADDED                 : \"added\",\nADDED_TO_STAGE         : \"addedToStage\",\nENTER_FRAME             : \"enterFrame\",\nREMOVED             : \"removed\",\nREMOVED_FROM_STAGE    : \"removedFromStage\"\n}\n\nclass Event {\n\tconstructor(type, bubbles, cancelable = true) {\n\t\tthis.type = type;\n    this.cancelable = cancelable;\n    this.bubbles = bubbles;\n    this.data = null;\n    this.target = null;\n    this.currentTarget = null;\n\t}\n\n  stopPropagation() {\n    if(this.cancelable) {\n      this.bubbles = false;\n    }\n  }\n\n};\nexport default Event;\n\n//Tomahawk.registerClass( Event, \"Event\" );\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/event.js","//Tomahawk.registerClass( Bitmap, \"Bitmap\" );\n//Tomahawk.extend( \"Bitmap\", \"DisplayObject\" );\nimport DisplayObject from \"./displayObject\";\n\nclass Bitmap extends DisplayObject {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.texture = null;\n\t}\n\n\tdraw( context ) {\n\t\tconst { rect, data } = this.texture;\n\t\tconst [x,y, width, height] = rect;\n\t\tcontext.drawImage(data, x, y, width, height, 0, 0, this.width, this.height);\n\t}\n};\nexport default Bitmap;\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/app/bitmap.js"],"sourceRoot":""}